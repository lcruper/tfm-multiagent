@startuml

skinparam classBackgroundColor white

dataclass Battery <<(D, lightblue)>>{
    + voltage: float
}

dataclass Position <<(D, lightblue)>> {
    + x: float
    + y: float
    + z: float
}

dataclass Orientation  <<(D, lightblue)>> {
    + roll: float
    + pitch: float
    + yaw: float
}

dataclass Pose <<(D, lightblue)>> {
    + position: Position
    + orientation: Orientation
}

dataclass TelemetryData <<(D, lightblue)>> {
    + pose: Pose
    + battery: Battery
}

dataclass Frame <<(D, lightblue)>> {
    + data: np.ndarray
}

dataclass FrameWithTelemetry <<(D, lightblue)>> {
    + frame: Frame
    + telemetry: TelemetryData
}

dataclass Point2D <<(D, lightblue)>> {
    + x: float
    + y: float
}


Pose *-- Position
Pose *-- Orientation
TelemetryData *-- Pose
TelemetryData *-- Battery
FrameWithTelemetry *-- Frame
FrameWithTelemetry *-- TelemetryData


interface ITelemetry  {
    +start(): void
    +stop(): void
    +get_telemetry(): TelemetryData
}

interface IMovementSimulator {
    +start(): void
    +stop(): void
    +get_xy(): Point2D
}

interface ICamera {
    +start(): void
    +stop(): void
    +get_frame(): Frame
    +turn_on_flash(): void
    +turn_off_flash(): void
}

abstract class AFrameConsumer <<(A, LightCoral)>> {
    - _queue : Queue<FrameWithTelemetry>
    {abstract} +start(): void
    {abstract} +stop(): void
    +enqueue(fwt: FrameWithTelemetry): void
    {abstract}-_process_frame(fwt: FrameWithTelemetry): Any
}

abstract class ARobot <<(A, LightCoral)>> {
    - _callback_onPoint: Callable<[Point2D], void>
    - _callback_onFinish: Callable<[], void>
    {abstract}+ start_routine(positions: List<Point2D>): void
    {abstract}+ stop_routine(): List<Point2D>
    + set_callback_onPoint(callback: Callable<[Point2D], void>): void
    + set_callback_onFinish(callback: Callable<[], void>): void
    {abstract}+ get_current_position(): Point2D
    {abstract}+ get_telemetry(): Dict<String, float>
}

interface IPathPlanner {
    +plan_path(start: Point2D, points: List<Point2D>): List<Point2D>
}

ITelemetry ----> TelemetryData
IMovementSimulator ----> Point2D
ICamera ----> Frame
AFrameConsumer --> FrameWithTelemetry
ARobot ---> Point2D
ARobot ---> TelemetryData
IPathPlanner ----> Point2D
@enduml
